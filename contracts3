<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>All Pro Painting Plus - Professional Estimate</title>
<style>
:root { --allpro-blue: #002D62; --border-heavy: 2px solid var(--allpro-blue); }
body { font-family: "Segoe UI", Arial, sans-serif; background-color: #555; margin: 0; padding: 0; padding-bottom: 120px; }
.contract-page { background: white; width: 8.5in; margin: 20px auto; padding: 0.4in; box-shadow: 0 0 15px rgba(0,0,0,0.5); box-sizing: border-box; position: relative; }
.top-header { display: grid; grid-template-columns: 1fr 1.2fr; border-bottom: var(--border-heavy); padding-bottom: 12px; margin-bottom: 12px; }
.brand-side { color: var(--allpro-blue); }
.brand-side h2 { margin: 0 0 4px 0; font-size: 26px; letter-spacing: 1px; font-weight: 700; }
.brand-side p { margin: 1px 0; line-height: 1.2; font-size: 13px; }
.cert-side { text-align: right; }
.badge-row { display: flex; justify-content: flex-end; align-items: center; gap: 15px; margin-bottom: 8px; }
.cert-img-osha { height: 50px; width: auto; }
.cert-img-epa { height: 55px; width: auto; }

/* THE SPLIT ADDRESS FIX */
.info-grid { display: grid; grid-template-columns: 1fr 1fr; border: var(--border-heavy); margin-bottom: 15px; }
.info-cell { border: 1px solid var(--allpro-blue); padding: 2px 6px; }
.label { font-size: 9px; font-weight: 600; text-transform: uppercase; display: block; margin-bottom: 1px; color: var(--allpro-blue); }
input { border: none; font-family: inherit; font-size: 13px; height: 16px; width: 100%; outline: none; background: transparent; }

table { width: 100%; border-collapse: collapse; border: var(--border-heavy); margin-bottom: 10px; table-layout: fixed; }
th { border: 1px solid var(--allpro-blue); background: #f0f4f8; padding: 6px; font-size: 11px; color: var(--allpro-blue); }
td { border: 1px solid var(--allpro-blue); padding: 0; vertical-align: top; }
textarea { width: 100%; border: none; font-family: inherit; font-size: 12px; resize: none; background: transparent; padding: 4px; box-sizing: border-box; overflow: hidden; min-height: 26px; line-height: 1.2; display: block; }

@media print {
@page { size: Letter; margin: 0; }
body { background: white; padding: 0; }
.app-footer, .no-print, input[type="file"], .btn-red { display: none !important; }
.contract-page { margin: 0; width: 100%; box-shadow: none; border: none !important; }
textarea { height: auto !important; overflow: visible !important; display: block !important; }
tr { page-break-inside: avoid !important; }
}

.app-footer { position: fixed; bottom: 0; width: 100%; background: #111; padding: 20px; display: flex; justify-content: center; gap: 20px; z-index: 1000; }
.btn { padding: 15px 30px; font-weight: bold; cursor: pointer; border: 2px solid white; text-transform: uppercase; border-radius: 4px; }
.btn-blue { background: var(--allpro-blue); color: white; }
.btn-green { background: #27ae60; color: white; }
</style>

</head>
<body>
<div class="contract-page">
<div class="top-header">
<div class="brand-side">
<h2>ALL PRO PAINTING PLUS</h2>
<p>Servicing The Capital Region</p>
<p>(518) 701-0308</p>
</div>
<div class="cert-side">
<div class="badge-row">
<img src="lead-safe-certified-firm.png" class="cert-img-epa">
<img src="original333.png" class="cert-img-osha">
</div>
<span class="label">Contract #</span><input type="text">
<span class="label">Date</span><input type="date" id="docDate">
</div>
</div>

<div class="info-grid">
<div class="info-cell" style="grid-column: span 2;"><span class="label">Customer</span><input type="text"></div>
<div class="info-cell" style="grid-column: span 2;"><span class="label">Street Address</span><input type="text"></div>
<div class="info-cell"><span class="label">City / Town</span><input type="text"></div>
<div class="info-cell"><span class="label">State / Zip</span><input type="text"></div>
<div class="info-cell"><span class="label">Phone</span><input type="text"></div>
<div class="info-cell"><span class="label">Email</span><input type="text"></div>
</div>

<table>
<thead><tr><th>Area</th><th>Description</th><th>Material</th><th>Labor</th></tr></thead>
<tbody id="rows"></tbody>
</table>

<div style="display:grid; grid-template-columns:1fr 1fr; gap:20px;">
<div style="border:var(--border-heavy); padding:10px;">
<span class="label">Acceptance Signature</span>
<canvas id="sig-canvas" style="width:100%; height:90px; border-bottom: 1px solid #ccc;"></canvas>
</div>
<div style="border:var(--border-heavy); padding:10px; text-align:right;">
<div>TOTAL: <span id="gDisp">$0.00</span></div>
</div>
</div>
</div>

<div class="app-footer">
<button class="btn btn-blue" onclick="addRow()">+ Add Line</button>
<button class="btn btn-green" onclick="window.print()">Generate PDF</button>
</div>

<script>
document.getElementById('docDate').valueAsDate = new Date();
function addRow(){
const tr=document.createElement('tr');
tr.innerHTML=&lt;td&gt;&lt;textarea oninput=&quot;autoExpand(this)&quot;&gt;&lt;/textarea&gt;&lt;/td&gt;&lt;td&gt;&lt;textarea oninput=&quot;autoExpand(this)&quot;&gt;&lt;/textarea&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=&quot;number&quot; class=&quot;mat&quot; onchange=&quot;calcTotal()&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=&quot;number&quot; class=&quot;lab&quot; onchange=&quot;calcTotal()&quot;&gt;&lt;/td&gt;;

document.getElementById('rows').appendChild(tr);
}
addRow();
function autoExpand(el){ el.style.height="auto"; el.style.height=el.scrollHeight+"px"; }
function calcTotal(){
let m=0,l=0;
document.querySelectorAll('.mat').forEach(i=>m+=Number(i.value)||0);
document.querySelectorAll('.lab').forEach(i=>l+=Number(i.value)||0);
document.getElementById('gDisp').innerText='$'+(m+l).toFixed(2);
}
const canvas=document.getElementById('sig-canvas'); const ctx=canvas.getContext('2d');
function resizeCanvas(){ const ratio=window.devicePixelRatio||1; canvas.width=canvas.offsetWidthratio; canvas.height=canvas.offsetHeightratio; ctx.scale(ratio,ratio); ctx.lineWidth=2; }
resizeCanvas();
let drawing=false;
function pos(e){ const r=canvas.getBoundingClientRect(); return{ x:(e.touches?e.touches[0].clientX:e.clientX)-r.left, y:(e.touches?e.touches[0].clientY:e.clientY)-r.top }; }
canvas.addEventListener('mousedown',e=>{ drawing=true; ctx.beginPath(); let p=pos(e); ctx.moveTo(p.x,p.y); });
canvas.addEventListener('mousemove',e=>{ if(!drawing)return; let p=pos(e); ctx.lineTo(p.x,p.y); ctx.stroke(); });
window.addEventListener('mouseup',()=>drawing=false);
</script>

</body>
</html>
