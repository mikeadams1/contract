<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>All Pro Painting Plus - Contract</title>
    <style>
        :root { --allpro-blue: #002D62; --border-heavy: 2px solid #002D62; }
        body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background: #f0f2f5; color: #333; }
        
        /* Document Setup */
        .contract-page { 
            background: white; width: 8.5in; min-height: 10.5in; 
            margin: 0.5in auto; padding: 0.5in; box-sizing: border-box; 
            position: relative; box-shadow: 0 0 10px rgba(0,0,0,0.1); 
            page-break-after: always; 
        }

        /* Header Styles */
        .header-row { display: flex; justify-content: space-between; border-bottom: var(--border-heavy); padding-bottom: 10px; margin-bottom: 20px; }
        .logo-area h1 { margin: 0; color: var(--allpro-blue); font-size: 28px; }
        .certifications { font-size: 9px; text-align: right; }

        /* Table Styles */
        table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
        th { background: var(--allpro-blue); color: white; padding: 8px; font-size: 12px; }
        td { border: 1px solid #ccc; padding: 0; vertical-align: top; }
        
        textarea { 
            width: 100%; border: none; padding: 8px; resize: none; 
            box-sizing: border-box; font-family: inherit; font-size: 13px;
            display: block; overflow: hidden;
        }
        input[type="number"], input[type="text"], input[type="date"] { 
            width: 100%; border: none; padding: 8px; box-sizing: border-box; 
        }

        /* Footer/Signature Area */
        .footer-row { 
            display: flex; justify-content: space-between; align-items: flex-end; 
            margin-top: 20px; page-break-inside: avoid;
        }
        .sig-container { width: 60%; }
        .total-container { width: 35%; border: var(--border-heavy); padding: 10px; text-align: right; }
        canvas { border-bottom: 1px solid #000; width: 100%; height: 80px; cursor: crosshair; }

        /* Legal Text Styles */
        .legal-box { font-size: 10px; line-height: 1.4; text-align: justify; margin-top: 20px; }
        .legal-box p { margin-bottom: 10px; }

        .btn-blue { background: var(--allpro-blue); color: white; padding: 10px 20px; border: none; cursor: pointer; border-radius: 4px; }
        .no-print-btn { margin: 20px auto; display: block; width: fit-content; }

        @media print {
            body { background: white; }
            .contract-page { margin: 0; box-shadow: none; width: 100%; }
            .no-print { display: none !important; }
            textarea { border: none !important; }
        }
    </style>
</head>
<body>

<div class="no-print no-print-btn">
    <button class="btn-blue" onclick="window.print()">Generate PDF / Print</button>
    <button class="btn-blue" onclick="addRow()">Add Work Item</button>
</div>

<div class="contract-page">
    <div class="header-row">
        <div class="logo-area">
            <h1>ALL PRO PAINTING PLUS</h1>
            <div style="font-size: 11px;">Servicing The Capital Region & North Country</div>
            <div style="font-weight: bold;">(518) 701-0308</div>
        </div>
        <div class="certifications">
            LEAD SAFE EPA CERTIFIED | OSHA CERTIFIED<br>
            LICENSED / CERTIFIED / FULLY INSURED / 40 YEARS EXPERIENCE
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
        <div>
            <label style="font-size: 10px; font-weight: bold;">CUSTOMER / PROPERTY OWNER</label>
            <input type="text" placeholder="Full Name">
            <label style="font-size: 10px; font-weight: bold;">PROJECT ADDRESS</label>
            <input type="text" placeholder="Address, City, State, Zip">
        </div>
        <div>
            <label style="font-size: 10px; font-weight: bold;">DOCUMENT DATE</label>
            <input type="date" id="docDate">
            <label style="font-size: 10px; font-weight: bold;">PHONE / EMAIL</label>
            <input type="text" placeholder="Contact Info">
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th style="width: 20%;">Area</th>
                <th style="width: 50%;">Work Description</th>
                <th style="width: 15%;">Materials</th>
                <th style="width: 15%;">Labor</th>
            </tr>
        </thead>
        <tbody id="rows">
            </tbody>
    </table>

    <div class="footer-row">
        <div class="sig-container">
            <div style="font-size: 10px; font-weight: bold;">CUSTOMER ACCEPTANCE & AUTHORIZATION</div>
            <canvas id="sig-canvas"></canvas>
            <div style="font-size: 9px; color: #666; margin-top: 5px;">
                By signing, you agree to the terms on the final page of this contract.
            </div>
        </div>
        <div class="total-container">
            <div style="font-size: 12px;">Materials: <span id="mDisp">$0.00</span></div>
            <div style="font-size: 12px;">Labor: <span id="lDisp">$0.00</span></div>
            <div style="font-size: 11px; margin-bottom: 5px;">Sales Tax: <input type="number" id="tax" style="width: 60px; border-bottom: 1px solid #ccc;" onchange="calcTotal()" value="0"></div>
            <div style="font-size: 20px; font-weight: bold; color: var(--allpro-blue);">TOTAL: <span id="gDisp">$0.00</span></div>
        </div>
    </div>
</div>

<div class="contract-page">
    <h2 style="color: var(--allpro-blue); border-bottom: var(--border-heavy);">CONTRACT TERMS & LEGAL DISCLOSURES</h2>
    <div class="legal-box">
        <p><strong>RIGHT TO CANCEL:</strong> Pursuant to NY GBL ยง 771(1)(h), the owner may cancel this contract until midnight of the third business day after the day on which the owner has signed this agreement.</p>
        
        <p><strong>TITLE TO MATERIALS:</strong> All materials purchased and installed remain the sole property of All Pro Painting Plus until the contract balance is paid in full.</p>

        <p><strong>UNFORESEEN CONDITIONS:</strong> Additional unforeseen work discovered after project commencement (structural rot, hidden defects, etc.) will require an amendment to this contract and additional reasonable fees to complete.</p>

        <p><strong>SITE SAFETY:</strong> Pursuant to OSHA Regulations, the worksite is restricted. Customers, children, and elderly residents are prohibited from the active workspace for safety reasons.</p>

        <p><strong>NON-DISPARAGEMENT:</strong> To protect the integrity and reputation of the Contractor, the Customer agrees to refrain from making any disparaging, negative, or defamatory statements, whether written or verbal, regarding the Contractor or the services provided in any public or digital forum.</p>

        <p><strong>PAYMENT TERMS:</strong> Payment is due in full on the day of completion via local check, cash, or wire transfer. Payment signifies 100% satisfaction with the work performed.</p>
    </div>
    
    <div style="margin-top: 50px; border-top: 1px solid #000; width: 300px;">
        <div style="font-size: 10px;">Contractor Acceptance & Date</div>
    </div>
</div>

<script>
    // 1. Set initial date
    document.getElementById('docDate').valueAsDate = new Date();

    // 2. Auto-expand textareas to prevent cutting off text
    function autoExpand(el) {
        el.style.height = "auto";
        el.style.height = el.scrollHeight + "px";
    }

    // 3. Add rows dynamically
    function addRow() {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td><textarea oninput="autoExpand(this)" placeholder="Kitchen, Exterior, etc."></textarea></td>
            <td><textarea oninput="autoExpand(this)" placeholder="Describe prep, priming, and finish..."></textarea></td>
            <td><input type="number" class="mat" onchange="calcTotal()" value="0"></td>
            <td><input type="number" class="lab" onchange="calcTotal()" value="0"></td>
        `;
        document.getElementById('rows').appendChild(tr);
    }

    // Start with 1 row
    for(let i=0; i<1; i++) addRow();

    // 4. Calculate Totals
    function calcTotal() {
        let m = 0, l = 0;
        document.querySelectorAll('.mat').forEach(i => m += Number(i.value) || 0);
        document.querySelectorAll('.lab').forEach(i => l += Number(i.value) || 0);
        let t = Number(document.getElementById('tax').value) || 0;

        document.getElementById('mDisp').innerText = '$' + m.toFixed(2);
        document.getElementById('lDisp').innerText = '$' + l.toFixed(2);
        document.getElementById('gDisp').innerText = '$' + (m + l + t).toFixed(2);
    }

    // 5. Simple Signature Logic
    const canvas = document.getElementById('sig-canvas');
    const ctx = canvas.getContext('2d');
    let writing = false;

    canvas.addEventListener('mousedown', () => writing = true);
    canvas.addEventListener('mouseup', () => { writing = false; ctx.beginPath(); });
    canvas.addEventListener('mousemove', (e) => {
        if (!writing) return;
        ctx.lineWidth = 2;
        ctx.lineCap = 'round';
        const rect = canvas.getBoundingClientRect();
        ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
        ctx.stroke();
    });
</script>

</body>
</html>
