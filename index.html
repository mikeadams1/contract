<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>All Pro Painting Plus - Professional Estimate</title>
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="All Pro Painting">
<link rel="apple-touch-icon" href="original333.png">
<style>
:root { 
    --allpro-blue: #002D62; 
    --border-heavy: 2px solid var(--allpro-blue); 
}

/* BODY */
body { 
    font-family: "Segoe UI", Arial, sans-serif;
    background-color: #555; 
    margin: 0; padding: 0; padding-bottom: 120px; 
}

/* PAGE SETUP */
.contract-page { 
    background: white; 
    width: 8.5in;
    margin: 20px auto; 
    padding: 0.4in; 
    box-shadow: 0 0 15px rgba(0,0,0,0.5); 
    box-sizing: border-box; 
    position: relative; 
}

/* HEADER */
.top-header { 
    display: grid; 
    grid-template-columns: 1fr 2fr 1fr; 
    border-bottom: var(--border-heavy); 
    padding-bottom: 8px; 
    margin-bottom: 8px;
    align-items: center;
}

.header-left { display: flex; flex-direction: column; gap: 5px; align-items: flex-start; }
.cert-img-osha { height: 35px; width: auto; }
.cert-img-epa { height: 40px; width: auto; }

.header-center { text-align: center; color: var(--allpro-blue); }
.header-center h1 { margin: 0; font-size: 24px; letter-spacing: 1px; text-transform: uppercase; }
.header-center p { margin: 2px 0; font-size: 11px; font-weight: 600; }
.header-center h4 { margin: 8px 0 0 0; font-size: 16px; text-decoration: underline; }

.header-right { color: var(--allpro-blue); font-weight: bold; font-size: 11px; line-height: 1.1; text-align: right; }

/* INFO GRID - IPAD BLEED FIX */
.info-grid { 
    display: grid; 
    grid-template-columns: repeat(4, 1fr); 
    border-top: var(--border-heavy);
    border-left: var(--border-heavy);
    margin-bottom: 10px; 
    background-color: white;
}
.info-cell { 
    border-right: var(--border-heavy); 
    border-bottom: var(--border-heavy); 
    padding: 2px 5px; 
    background-color: white !important;
    position: relative;
    overflow: hidden; 
}
.label { font-size: 8px; font-weight: 800; text-transform: uppercase; display: block; color: var(--allpro-blue); position: relative; z-index: 2; }

/* INPUT IPAD OVERRIDE */
input { 
    border: none; 
    font-family: inherit; 
    font-size: 12px; 
    height: 18px; 
    width: 100%; 
    outline: none; 
    background: transparent !important; 
    -webkit-appearance: none; 
    border-radius: 0;
    position: relative;
    z-index: 1;
}

input:focus, input:-webkit-autofill, textarea:focus {
    -webkit-box-shadow: 0 0 0px 1000px white inset !important;
    box-shadow: 0 0 0px 1000px white inset !important;
}

/* TABLE */
table { width: 100%; border-collapse: collapse; border: var(--border-heavy); margin-bottom: 10px; table-layout: fixed; }
th { border: 1px solid var(--allpro-blue); background: #f0f4f8; padding: 4px; font-size: 10px; color: var(--allpro-blue); }
td { border: 1px solid var(--allpro-blue); padding: 0; vertical-align: top; background: white; }

tr { page-break-inside: avoid !important; break-inside: avoid !important; }

textarea { 
    width: 100%; border: none; font-family: inherit; font-size: 12px; resize: none; 
    background: transparent; padding: 4px; box-sizing: border-box; overflow: hidden; 
    min-height: 24px; line-height: 1.3; display: block; -webkit-appearance: none; outline: none;
}

.print-text { display: none; white-space: pre-wrap; word-wrap: break-word; font-size: 12px; padding: 4px; line-height: 1.3; }

/* PHOTO GRID - WORKING VERSION */
.photo-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px; }
.photo-slot { border: 1px solid var(--allpro-blue); padding: 10px; text-align: center; }
.preview-img { max-width: 100%; max-height: 250px; display: none; margin-top: 10px; border: 1px solid #ccc; }

/* SIGNATURE BLOCK */
.sig-container { border: var(--border-heavy); padding: 8px; background: white; }
#sig-canvas { background: #f0f0f0; cursor: not-allowed; width: 100%; height: 80px; border-bottom: 1px solid #000; margin-top: 5px; opacity: 0.5; }
#sig-canvas.enabled { background: #fff; cursor: crosshair; opacity: 1; }
.sig-controls { display: flex; justify-content: space-between; align-items: center; margin-top: 5px; }

/* TERMS CHECKBOX */
.terms-check-wrapper { background: #fff8e1; border: 1px solid #ffca28; padding: 8px; margin-bottom: 10px; font-size: 11px; display: flex; align-items: center; gap: 10px; color: #333; }
.terms-check-wrapper input[type="checkbox"] { width: 22px; height: 22px; cursor: pointer; }

/* PRINT SETTINGS */
@media print {
    @page { size: Letter; margin: 0.5in; }
    body { background: white; padding: 0; }
    .app-footer, .no-print, input[type="file"], .btn-red, .sig-btn, .terms-check-wrapper { display: none !important; }
    .contract-page { margin: 0; width: 100%; box-shadow: none; border: none !important; padding: 0.1in; }
    .force-break { break-before: page; page-break-before: always; }
    textarea { display: none !important; }
    .print-text { display: block !important; }
    #sig-canvas { background: white !important; opacity: 1 !important; }
}

.app-footer { position: fixed; bottom: 0; width: 100%; background: #111; padding: 20px; display: flex; justify-content: center; gap: 20px; z-index: 1000; }
.btn { padding: 15px 30px; font-weight: bold; cursor: pointer; border: 2px solid white; text-transform: uppercase; border-radius: 4px; }
.btn-blue { background: var(--allpro-blue); color: white; }
.btn-green { background: #27ae60; color: white; }
.sig-btn { background: #eee; border: 1px solid #ccc; font-size: 9px; padding: 2px 5px; cursor: pointer; color: #666; border-radius: 3px; }
.btn-red { background: transparent; color: #cc0000; border:none; cursor:pointer; font-size:10px; margin-top:5px; }
</style>
</head>

<body>

<div class="contract-page">
    <div class="top-header">
        <div class="header-left">
            <img src="original333.png" class="cert-img-epa">
            <img src="lead-safe-certified-firm.png" class="cert-img-osha">
        </div>
        
        <div class="header-center">
            <h1>ALL PRO PAINTING PLUS</h1>
            <p>(518) 701-0308 | www.allpropaintingplus.com</p>
            <h4>RESIDENTIAL PAINTING CONTRACT</h4>
        </div>

        <div class="header-right">
            Quality<br>Service<br>Reliability<br>
            <div style="margin-top: 8px;">
                <span class="label" style="text-align: right;">Date</span>
                <input type="date" id="docDate" style="text-align:right;">
            </div>
        </div>
    </div>

    <div style="border: 3px double var(--allpro-blue); text-align: center; padding: 4px; margin-bottom: 10px; font-weight: bold; color: var(--allpro-blue); font-size: 10px;">
        LICENSED / CERTIFIED / FULLY INSURED / 40 YEARS EXPERIENCE
    </div>

    <div class="info-grid">
        <div class="info-cell" style="grid-column: span 3;"><span class="label">Customer Name</span><input type="text" spellcheck="false" autocomplete="off"></div>
        <div class="info-cell"><span class="label">Phone</span><input type="text" spellcheck="false" autocomplete="off"></div>
        <div class="info-cell" style="grid-column: span 4;"><span class="label">Project Street Address</span><input type="text" spellcheck="false" autocomplete="off"></div>
        <div class="info-cell" style="grid-column: span 2;"><span class="label">City</span><input type="text" spellcheck="false" autocomplete="off"></div>
        <div class="info-cell"><span class="label">State</span><input type="text" value="NY" spellcheck="false" autocomplete="off"></div>
        <div class="info-cell"><span class="label">Zip</span><input type="text" spellcheck="false" autocomplete="off"></div>
        <div class="info-cell" style="grid-column: span 2;"><span class="label">Email</span><input type="text" spellcheck="false" autocomplete="off"></div>
        <div class="info-cell"><span class="label">Start Date</span><input type="date"></div>
        <div class="info-cell"><span class="label">Est. Finish</span><input type="date"></div>
    </div>

    <table>
        <thead>
            <tr>
                <th style="width:20%;">Area</th>
                <th style="width:50%;">Work Description</th>
                <th style="width:15%;">Materials</th>
                <th style="width:15%;">Labor</th>
            </tr>
        </thead>
        <tbody id="rows"></tbody>
    </table>

    <div style="display:grid; grid-template-columns:1.5fr 1fr; gap:15px; margin-top:10px;">
        <div>
            <div class="terms-check-wrapper no-print">
                <input type="checkbox" id="termsAgree" onchange="toggleSignature(this)">
                <label for="termsAgree"><strong>By Clicking Here I Verify that I Have Read and Agree to the Terms & Conditions Attached Hereto.</strong></label>
            </div>
            <div class="sig-container">
                <span class="label" style="font-size:6px; line-height: 1.1;">Customer Signature Stipulates that they have the authority to enter into this Contract and that he/she is in complete agreement to all the Terms and Conditions and agree to make Payment In Full On Day Of Completion.</span>
                <canvas id="sig-canvas"></canvas>
                <div class="sig-controls">
                    <span style="font-size: 10px; color: var(--allpro-blue); font-weight: bold;">Signature</span>
                    <button class="sig-btn no-print" onclick="clearSig()">Clear Signature</button>
                    <span style="font-size: 10px; color: var(--allpro-blue); font-weight: bold;">Date</span>
                </div>
            </div>
        </div>

        <div style="border:var(--border-heavy); padding:10px; text-align:right; color:var(--allpro-blue); background:white;">
            <div style="font-weight: bold; font-size: 12px;">SUB TOTAL: <span id="lDisp">$0.00</span></div>
            <div style="font-size:10px; margin-top: 3px;">NY Sales Tax 0.7%: <input type="number" id="tax" style="width:60px; border-bottom: 1px solid var(--allpro-blue); text-align: right;" onchange="calcTotal()"></div>
            <div style="font-size:16px; font-weight:bold; border-top:2px solid var(--allpro-blue); margin-top:5px; padding-top:5px;">
                TOTAL DUE: <span id="gDisp">$0.00</span>
            </div>
            <p style="font-size:10px; margin-top:10px; font-weight: bold;">Contractors Signature</p>
        </div>
    </div>
</div>

<div class="contract-page force-break">
    <h3 style="color:#002D62; border-bottom:2px solid #002D62; padding-bottom:4px; margin-top: 0; font-size: 14px;">TERMS & CONDITIONS</h3>
    <div style="font-size:10px; line-height:1.3; text-align: justify; color: #333;">
        <p><strong>GENERAL BUSINESS LAW:</strong> Pursuant to New York State General Business Law the following disclosures listed herein are understood and accepted by the party signing this contract for services and as the consumer, by my signature executed on this contract, I agree that I have read the same and fully understand and agree to be bound by all the terms stated herein. Pursuant to GBL 771(1)(h) you have a right to cancel this contract within three business days.  See, GBL ยง 771(1)(h). In addition to any right otherwise to revoke an offer, the owner may cancel the home improvement contract until midnight of the third business day after the day on which the owner has signed an agreement or offer to purchase relating to such contract. Cancellation occurs when written notice of cancellation is given to the home improvement contractor. Notice of cancellation, if given by mail, shall be deemed given when deposited in a mailbox properly addressed and postage prepaid (Send Notices to: All Pro Painting Plus, 2 Wallingford Court, Gansevoort, New York 12831). Notice of cancellation shall be sufficient if it indicates the intention of the owner not to be bound. Notwithstanding the foregoing, this paragraph shall not apply to a transaction in which the owner has initiated the contact and the home improvement is needed to meet a bona fide emergency of the owner, and the owner furnishes the home improvement contractor with a separate dated and signed personal statement in the owner's handwriting describing the situation requiring immediate remedy and expressly acknowledging and waiving the right to cancel the home improvement contract within three business days. For the purposes of this paragraph the term "owner" shall mean an owner or any representative of an owner. Any contractor, subcontractor, or materialman who provides home improvement goods or services pursuant to your home improvement contract and who is not paid may have a valid legal claim against your property known as a mechanic's lien.  Any mechanic's lien filed against your property may be discharged.  Payment of the agreed-upon price under the home improvement contract prior to filing of a mechanic's lien may invalidate such lien.  The owner may contact an attorney to determine his rights to discharge a mechanic's lien.  (GBL ยง 771[1][d]); notice that all payments received by the contractor prior to completion of the contract work must be deposited in an escrow account in accordance with Lien Law ยง71-a(4) or that, in lieu of making the deposit in escrow, the contractor must post a bond, contract of indemnity or irrevocable letter of credit with the owner guaranteeing the return or proper application of the payments to the purposes of the contract (GBL ยง 771[1 ][e]).
        <p><strong>WORK AUTHORIZATION & BINDING AGREEMENT:</strong> By executing this contract, the Customer acknowledges that they have read this document and all accompanying pages in its entirety and expressly agrees to all of the terms, conditions, inculding but not limited to, work descriptions and the like stated herein. By signing this Contract, you the customer authorize All Pro Painting Plus to perform the services described herein and promise to pay for the same as outlined herein. <strong>TITLE TO MATERIALS:</strong> It is accepted and understood that all materials purchased and installed by All Pro Painting Plus remain the sole property of the Contractor until the contract balance is paid in full. The Customer agrees to the payment terms specified on the face of this document.</p>
        
        <p><strong>UNFORESEEN CONDITIONS:</strong> In the event that any additional unforeseen work is discovered and required to complete the terms of this contract or the scope of work agreed to in this contract, consumer agrees to pay any additional reasonable fees to accomplish the same. Consumer, property owner, or general contractor agrees that unforeseen work discovered after the job has been opened, or absent any destructive investigation where upon visual inspection of the areas were unknown to the contractor and consumer, the consumer agrees to amend this contract regarding the same and agrees to pay additional reasonable amounts for the work to be completed. Customer further agrees to To protect the integrity and reputation of the Contractor, the Customer agrees to refrain from making any disparaging, negative, or defamatory statements, whether written or verbal, regarding the Contractor, their employees, or the services provided. This includes, but is not limited to, the posting of negative reviews or comments on any Internet-based social media or review platform. This non-disparagement agreement is a permanent and material condition of this contract.</p>
       
        <p><strong>MATERIALS/OTHER:</strong> The customer by executing their signature on this contract agrees that the we work on a best efforts basis and agrees to hold harmless the painting contractor (contractor means, painting contractor) for any material related matters that may arise from poor quality or cut rate project materials supplied by the consumer. If consumer is supplying the materials, consumer agrees that the materials supplied will be in conformity with industry standards. The consumer agrees that professional painters are responsible for the workmanship and not materials failure to cover completely in one or two coats and consumer agrees that additional coats of material (paint, stain, primer) may be required to accomplish industry standard appearances and at the consumers expense. Application of product: Paint shall be applied by industry standard methods consisting of rolling, spraying, brushing. In the event that the product supplied for the project does not cover and additional coats of material are needed, the additional work and materials shall be at the consumers expense only. The consumer accepts all responsibility for materials they supply for any project. The consumer agrees that if material for some reason is unusable due to spoilage or any other reason, consumer agrees to replace the material at their expense and agrees to adjust any dates for completion of the project accordingly. Paint Coverage: Many paint manufactures are making a product that promises one coat coverage however customer assumes the responsibility of paying for any additional coats where one coat does not cover the surface. Our experience tells us that two coats of paint are needed for even full body coverage and a primer coat for any new drywall or repaired drywall patches and customers who wish to only pay for one coat on any surface agrees that the contractor is not responsible in the event that the coverage is not as well as expectations.
        <p><strong>SITE SAFETY & ACCESS:</strong> You agree to allow us to do our work unsupervised and unfettered. You agree to allow contractor access to the job site and that once the work has commenced that you the customer are prohibited from access to the worksite for safety reasons to maintain a safe working environment in conformity with OSHA Regulations. All children must be kept from project work site, no exceptions. All elderly and those with physical disabilities are prohibited from worksite while any work is being performed. If for some reason it customer needs to or desires to inspect the work or walk through the worksite, please let us know and we will make provisions to move drop cloths or what ever is nessassary to provide a safe walkway the same. The customer is responsible for cleaning the areas to be painted prior to the commencement of any work, that includes wiping down all moldings, cleaning floors, moving furniture and removing artwork and fixtures from walls, storing any breakable or moveable objects, and disinfecting all areas including bathrooms and kitchen areas prior to any work being done; disinfecting all areas around the toilets including moldings, heating registers and the like. If you are being treated for any medical condition that may be harmful to you or workers such as allergies to paint or any other need to know issue prior to any work performed should be brought to the attention of the contractor or responsible person designated by the contractor.</p>

        <p>><strong>THE CONTRACT:</strong> The condition specifications and prices stated in this Contract and any referenced attachment herein are satisfactory and are hereby accepted by customer signing this contract physically and/or by verbal authorization, including but not limited to, customer acceptance of the contract and binding themselfs to the same via text or electronic communication indicating customer agrees to be bound to the contract in its entirety will be accepted on an as needed basis. The customer further agrees that the Contractor is authorized to do the work as specified on the face of the document in its entirety.<p>
        
        <p><strong>PAYMENT TERMS:</strong> The payment amounts stated in this contract is due on the day of project completion along with any amounts that are added to the contract due to change work orders that are verbally and/or in writing agreed to, including but not limtied to, payment for any and all materials purchased by All Pro Painting Plus. Your payment signifies that you the consumer are 100% satisfied and that the job is completed to your satisfaction and that no other work needs to be done in regards to the same. We do not take credit cards for payment. Payment must be made by a local check, cash, wire transfer, or certified check from a local bank and payment must be made in accordance with All Pro Paintint Plus direction. Although our company policy states we do not accept deposits for projects however, projects valued over $20,000.00 may require a material deposit to be escrowed by All Pro Painting Plus and disbursed for customers materials only.</p>
        <p><strong>CONTACT:</strong> You can contact All Pro Painting Plus by telephone or text at (518) 701-0308 and by electronic mail at: allpropaintinplus@yahoo.com and by regular mail to: All Pro Painting Plus, 2 Wallingford Court, Gansevoort, New York 12831
    </div>
</div>

<div id="photoPagesContainer"></div>

<div class="app-footer">
    <button class="btn btn-blue" onclick="addRow()">+ Add Line</button>
    <button class="btn btn-blue" onclick="addNewPhoto()">+ Add Photo</button>
    <button class="btn btn-green" onclick="window.print()">Generate PDF</button>
</div>

<script>
document.getElementById('docDate').valueAsDate = new Date();

function addRow(){ 
    const tr=document.createElement('tr'); 
    tr.innerHTML=`
        <td><textarea oninput="autoExpand(this)" spellcheck="false" autocomplete="off"></textarea><div class="print-text"></div></td>
        <td><textarea oninput="autoExpand(this)" spellcheck="false" autocomplete="off"></textarea><div class="print-text"></div></td>
        <td><input type="text" onchange="calcTotal()" spellcheck="false" autocomplete="off"></td>
        <td><input type="number" class="lab" onchange="calcTotal()"></td>`; 
    document.getElementById('rows').appendChild(tr); 
}
for(let i=0;i<1;i++) addRow();

function autoExpand(el){ 
    el.style.height="auto"; 
    el.style.height=el.scrollHeight+"px"; 
    const printDiv = el.parentElement.querySelector('.print-text');
    if(printDiv) printDiv.innerText = el.value;
}

function calcTotal(){
    let l=0; document.querySelectorAll('.lab').forEach(i=>l+=Number(i.value)||0);
    let t=Number(document.getElementById('tax').value)||0;
    lDisp.innerText='$'+l.toFixed(2); gDisp.innerText='$'+(l+t).toFixed(2);
}

let sigEnabled = false;
function toggleSignature(cb) {
    const cvs = document.getElementById('sig-canvas');
    if (cb.checked) { cvs.classList.add('enabled'); sigEnabled = true; } 
    else { cvs.classList.remove('enabled'); sigEnabled = false; clearSig(); }
}

let photoTotal=0;
function addNewPhoto(){
    photoTotal++;
    let container = document.getElementById('photoPagesContainer');
    let pages = container.querySelectorAll('.photo-page');
    let last = pages[pages.length-1];
    if(!last || last.querySelector('.photo-grid').querySelectorAll('.photo-slot').length >= 4){
        last = document.createElement('div');
        last.className = 'contract-page photo-page force-break';
        last.innerHTML = `<h2 style="border-bottom:var(--border-heavy);color:var(--allpro-blue); margin-top:0; font-size: 16px;">PROJECT PHOTO LOG</h2><div class="photo-grid"></div>`;
        container.appendChild(last);
    }
    const slot = document.createElement('div');
    slot.className = 'photo-slot';
    const id = 'img-' + photoTotal;
    slot.innerHTML = `
        <span class="label">Description</span>
        <textarea oninput="autoExpand(this)" spellcheck="false" autocomplete="off"></textarea><div class="print-text"></div>
        <input type="file" accept="image/*" onchange="pv(this,'${id}')" class="no-print">
        <img id="${id}" class="preview-img">
        <button class="btn-red" onclick="this.parentElement.remove()">Remove</button>`;
    last.querySelector('.photo-grid').appendChild(slot);
}

function pv(input,id){ 
    if(input.files&&input.files[0]){ 
        let r=new FileReader(); 
        r.onload=e=>{ let img=document.getElementById(id); img.src=e.target.result; img.style.display='block'; }; 
        r.readAsDataURL(input.files[0]); 
    } 
}

const canvas=document.getElementById('sig-canvas'); const ctx=canvas.getContext('2d');
function clearSig() { ctx.clearRect(0, 0, canvas.width, canvas.height); }
function resizeCanvas(){ 
    const ratio=window.devicePixelRatio||1; 
    canvas.width=canvas.offsetWidth*ratio; canvas.height=canvas.offsetHeight*ratio; 
    ctx.scale(ratio,ratio); ctx.lineWidth=2; ctx.strokeStyle="#000";
}
resizeCanvas(); window.addEventListener('resize',resizeCanvas);
let drawing=false;
function pos(e){ 
    const r=canvas.getBoundingClientRect(); 
    return{ x:(e.touches?e.touches[0].clientX:e.clientX)-r.left, y:(e.touches?e.touches[0].clientY:e.clientY)-r.top }; 
}
canvas.addEventListener('mousedown',e=>{ if(!sigEnabled) return; drawing=true; ctx.beginPath(); let p=pos(e); ctx.moveTo(p.x,p.y); });
canvas.addEventListener('mousemove',e=>{ if(!drawing || !sigEnabled)return; let p=pos(e); ctx.lineTo(p.x,p.y); ctx.stroke(); });
window.addEventListener('mouseup',()=>drawing=false);
canvas.addEventListener('touchstart',e=>{ if(!sigEnabled) return; drawing=true; ctx.beginPath(); let p=pos(e); ctx.moveTo(p.x,p.y); },{passive:false});
canvas.addEventListener('touchmove',e=>{ if(!drawing || !sigEnabled)return; e.preventDefault(); let p=pos(e); ctx.lineTo(p.x,p.y); ctx.stroke(); },{passive:false});
</script>
</body>
</html>
